# Database Configuration
DATABASE_URL=postgresql://user:password@localhost:5432/calendar_booking_db

# Security
SERVICE_API_KEY=your-secret-api-key-here-change-in-production
SERVICE_API_KEYS=key1,key2  # Optional comma-separated keys for rotation
API_KEY_RATE_LIMIT_PER_MINUTE=120
API_KEY_RATE_LIMIT_BURST=30

# Doctor Portal Auth (new dashboard on port 5000)
DOCTOR_PORTAL_JWT_SECRET=change-this-secret
DOCTOR_PORTAL_JWT_ALGORITHM=HS256
DOCTOR_PORTAL_ACCESS_TOKEN_EXPIRE_MINUTES=60
DOCTOR_PORTAL_REFRESH_TOKEN_EXPIRE_MINUTES=43200
DOCTOR_PORTAL_PORT=5000
DOCTOR_PORTAL_CORS_ORIGINS=http://localhost:5000,http://localhost:5173
DOCTOR_PORTAL_OAUTH_CLIENT_ID=your-google-oauth-client-id
DOCTOR_PORTAL_OAUTH_CLIENT_SECRET=your-google-oauth-client-secret
DOCTOR_PORTAL_OAUTH_REDIRECT_URI=http://localhost:5000/portal/auth/oauth/google/callback
DOCTOR_PORTAL_FRONTEND_CALLBACK_URL=http://localhost:5173/oauth/callback

# Admin Portal (backend on 5050, UI on 5500)
ADMIN_PORTAL_PORT=5050
ADMIN_PORTAL_DEBUG=False
ADMIN_PORTAL_JWT_SECRET=change-this-admin-secret
ADMIN_PORTAL_JWT_ALGORITHM=HS256
ADMIN_PORTAL_ACCESS_TOKEN_EXPIRE_MINUTES=60
ADMIN_PORTAL_CORS_ORIGINS=http://localhost:5050,http://localhost:5500
ADMIN_EMAIL=admin@example.com
# Provide a bcrypt hash of the admin password (required)
ADMIN_PASSWORD_HASH=
# Core/portal upstreams
CORE_API_BASE=http://localhost:8000
PORTAL_API_BASE=http://localhost:5000/portal

# Google Calendar Configuration
# Path to service account JSON credentials file
GOOGLE_CALENDAR_CREDENTIALS_PATH=./credentials/google-service-account.json
# Admin email for domain-wide delegation
GOOGLE_CALENDAR_DELEGATED_ADMIN_EMAIL=admin@yourdomain.com

# Webhook Configuration (for two-way calendar sync)
# Your public domain URL (must be HTTPS for production)
WEBHOOK_BASE_URL=https://yourdomain.com
# Secret token for webhook verification (generate a random secure string)
GOOGLE_CALENDAR_WEBHOOK_SECRET=your-random-webhook-secret-token-here

# Local/degraded modes (use only for dev)
DISABLE_CALENDAR_WORKERS=False
ALLOW_START_WITHOUT_API_KEY=False

# RAG Service Configuration (Optional)
RAG_SERVICE_URL=http://localhost:8001/api/v1
RAG_SERVICE_API_KEY=your-rag-service-api-key

# Redis (optional, for chatbot conversation state)
REDIS_URL=redis://localhost:6379

# CORS
CORS_ALLOW_ORIGINS=http://localhost:3000,http://localhost:8001

# Application Configuration
APP_NAME=Calendar Booking Service
APP_VERSION=1.0.0
DEBUG=False

# Availability search constraints
MAX_AVAILABILITY_DAYS=30
MAX_AVAILABILITY_RESULTS=200
MAX_LIST_LIMIT=200

# Calendar sync worker
CALENDAR_SYNC_MAX_RETRIES=5
CALENDAR_SYNC_RETRY_BASE_SECONDS=15
CALENDAR_SYNC_POLL_INTERVAL_SECONDS=5

# Calendar reconcile worker (Google Calendar -> DB backfill)
CALENDAR_RECONCILE_ENABLED=True
CALENDAR_RECONCILE_INTERVAL_SECONDS=900
CALENDAR_RECONCILE_BATCH_SIZE=50
CALENDAR_RECONCILE_REQUIRE_ACTIVE_WATCH=True

# Timezone
DEFAULT_TIMEZONE=UTC

# SMS Notifications (for doctors and patients via Twilio)
# Both doctors and patients receive SMS notifications for appointments
SMS_NOTIFICATIONS_ENABLED=False
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# Clinic Info (used in notifications)
CLINIC_NAME=Medical Clinic
CLINIC_ADDRESS=123 Main Street, City

# Email Notifications (commented out - enable later if needed)
# EMAIL_NOTIFICATIONS_ENABLED=False
# SMTP_SERVER=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM_EMAIL=noreply@yourclinic.com
